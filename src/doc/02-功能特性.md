# 功能特性說明

## 🚗 車輛模擬系統

### 多類型車輛支援

- **小型車 (Small)**：乘用車、計程車等
- **中型車 (Motor)**：機車、摩托車
- **大型車 (Large)**：公車、卡車、貨車

### 車輛行為模擬

- **直行行為**：依據燈號決定停止或通過
- **轉彎行為**：支援左轉、右轉和迴轉
- **智能等待**：在紅燈時自動排隊等待
- **碰撞避免**：檢測前方車輛避免碰撞

### 動態生成機制

```javascript
// 基於機率的車輛生成
const vehicleGeneration = {
  probability: 0.02, // 生成機率
  types: ['small', 'motor', 'large'],
  directions: ['top', 'left', 'bottom', 'right'],
  behaviors: ['straight', 'left', 'right', 'u-turn'],
}
```

## 🚦 智能交通燈控制

### AI 驅動決策

- **即時分析**：持續分析當前交通狀況
- **預測控制**：基於歷史數據預測最佳燈號時序
- **動態調整**：根據車流密度自動調整燈號時間
- **最佳化演算法**：減少整體等待時間

### 燈號狀態管理

- **四方向控制**：東西南北四個方向獨立控制
- **相位管理**：確保安全的燈號切換順序
- **緊急處理**：支援緊急車輛優先通行
- **手動介入**：提供手動控制選項

### 狀態同步機制

```javascript
// 燈號狀態同步
const lightStates = {
  north: 'green', // 北向綠燈
  south: 'green', // 南向綠燈
  east: 'red', // 東向紅燈
  west: 'red', // 西向紅燈
}
```

## 📊 數據收集與分析

### 即時數據監控

- **車流統計**：各方向車輛數量和類型
- **等待時間**：車輛平均等待時間統計
- **通過率**：單位時間內車輛通過數量
- **擁堵指數**：路口擁堵程度評估

### 歷史數據累積

- **時間序列**：按時間記錄交通變化
- **模式識別**：識別交通流量模式
- **效能評估**：評估不同控制策略效果
- **趨勢分析**：長期交通趨勢分析

### API 數據格式

```javascript
// 向 AI 後端發送的數據格式
const intersectionData = {
  timestamp: Date.now(),
  vehicles: {
    north: { motor: 2, small: 5, large: 1 },
    south: { motor: 1, small: 3, large: 0 },
    east: { motor: 3, small: 4, large: 2 },
    west: { motor: 0, small: 2, large: 1 },
  },
  currentLights: {
    north: 'green',
    south: 'green',
    east: 'red',
    west: 'red',
  },
  scene: '一般',
}
```

## 🎨 視覺化介面

### 即時動畫效果

- **流暢移動**：GSAP 提供的硬體加速動畫
- **轉彎軌跡**：真實的車輛轉彎路徑模擬
- **狀態指示**：燈號變化的視覺回饋
- **車輛識別**：不同車型的視覺區分

### 使用者控制介面

- **模擬控制面板**：開始、暫停、重置功能
- **參數調整面板**：車輛生成機率設定
- **視覺效果開關**：控制顯示效果
- **數據顯示面板**：即時統計資訊

### 響應式設計

- **多裝置支援**：支援桌面和平板裝置
- **彈性佈局**：自適應不同螢幕尺寸
- **直觀操作**：簡潔易用的操作介面
- **視覺反饋**：清晰的狀態指示

## 🔄 系統整合功能

### 模擬場景管理

- **場景配置**：支援不同交通場景設定
- **參數調整**：動態調整模擬參數
- **狀態保存**：保存和載入模擬狀態
- **批次執行**：支援多場景批次測試

### 效能監控

- **FPS 監控**：監控動畫幀率
- **記憶體使用**：追蹤記憶體消耗
- **API 回應時間**：監控後端回應速度
- **錯誤處理**：完善的錯誤捕捉機制

### 擴展接口

- **插件系統**：支援功能插件擴展
- **自定義車輛**：支援新增車輛類型
- **演算法接入**：支援不同 AI 演算法
- **數據導出**：支援數據導出分析

## 🛠️ 開發工具整合

### 調試功能

- **控制台輸出**：詳細的運行日誌
- **狀態檢查器**：即時查看系統狀態
- **效能分析器**：分析系統效能瓶頸
- **錯誤追蹤**：完整的錯誤堆疊追蹤

### 測試支援

- **單元測試**：各模組獨立測試
- **整合測試**：系統整合測試
- **效能測試**：系統效能基準測試
- **回歸測試**：確保功能穩定性

這些功能特性使得系統能夠提供真實、高效且可靠的交通模擬體驗，為交通管理和AI演算法研究提供有力支援。
